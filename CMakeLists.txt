# CMakeList.txt : Top-level CMake project file, do global configuration
# and include sub-projects here.
#
cmake_minimum_required (VERSION 3.8)
cmake_policy(SET CMP0074 NEW)

project (HaGame)
project (HaGameEditor C CXX)

message("CMAKE_MODULE_PATH = ${CMAKE_SOURCE_DIR}/modules")
set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/modules")
 
find_package(SDL2 REQUIRED)
find_package(SDL2_mixer REQUIRED)

find_package(OpenGL REQUIRED)

message(STATUS "OpenGL_FOUND:= ${OpenGL_FOUND}")
 
find_package(GLM REQUIRED)
 
#list(APPEND CMAKE_PREFIX_PATH ${CMAKE_SOURCE_DIR}/extern/glew-2.1.0)

find_package(GLEW REQUIRED)

#find_package(GLUT REQUIRED)

message(STATUS "OpenGL LIBS: ${OPENGL_INCLUDE_DIR}") 
message(STATUS "GLEW_LIBS: ${GLEW_LIBS}")
message(STATUS "GLUT_LIBS: ${GLUT_INCLUDE_DIRS}")
message(STATUS "SDL2_DIR = ${SDL2_INCLUDE_DIRS}")
message(STATUS "GLM_INCLUDE_DIR = ${GLM_INCLUDE_DIRS}")
message(STATUS "SDL2_LIB = ${SDL2_LIBS}")

include_directories(${SDL2_INCLUDE_DIRS} ${SDL2_MIXER_INCLUDE_DIRS} ${GLEW_INCLUDE_DIRS} ${OPENGL_INCLUDE_DIR} ${GLM_INCLUDE_DIRS})

# add_executable(HaGame HaGame/HaGame.cpp "HaGame/Graphics/Color.h"  "HaGame/Input/Device.h" "HaGame/Input/Devices/Gamepad.h" "HaGame/Graphics/Window.cpp" "HaGame/Graphics/Shader.cpp" "HaGame/Utils/FileSystem.cpp" "HaGame/Graphics/ShaderProgram.cpp" "HaGame/Utils/Clock.h" "HaGame/Graphics/Mesh.h" "HaGame/Utils/Aliases.h" "HaGame/Graphics/Routines.h" "HaGame/Graphics/Routines.cpp" "HaGame/Graphics/Camera.h"  "HaGame/Core/Transform.h" "HaGame/Core/Transform.cpp" "HaGame/Graphics/Primitives.h" "HaGame/Graphics/Texture.h" "HaGame/Vendor/stb/stb_image.cpp" "HaGame/Graphics/Texture.cpp" "HaGame/Math/Functions.h" "HaGame/Input/Devices/KeyboardMouse.h" "HaGame/Graphics/Monitors.h"  "HaGame/Math/Hypercube.h" "HaGame/Graphics/Sprite.h"   "HaGame/Core/ResourceManager.h" "HaGame/Core/ResourceManager.cpp" "HaGame/Core/Game.h" "HaGame/Core/Game.cpp" "HaGame/Demos/Breakout.hpp"   "HaGame/Graphics/OpenGL.h" "HaGame/Graphics/OpenGL.cpp" "HaGame/Utils/String.h" "HaGame/Utils/File.h" "HaGame/Utils/File.cpp" "HaGame/Utils/String.cpp" "HaGame/Physics/Collisions.h" "HaGame/Physics/Collisions.cpp" "HaGame/Demos/ECS.hpp" "HaGame/Utils/ObjectManager.h" "HaGame/Utils/Reflection.h" "HaGame/Core/ECS/Entity.h" "HaGame/Core/ECS/Component.h" "HaGame/Core/ECS/System.h" "HaGame/Utils/Logger.h" "HaGame/Utils/Loggers/ConsoleLogger.h" "HaGame/Utils/Loggers/FileLogger.h" "HaGame/Math/Quaternion.h" "HaGame/Math/Matrix.h"  "HaGame/Graphics/Material.h" "HaGame/Graphics/Line.h" "HaGame/Physics/Components/RigidBody.h" "HaGame/Vendor/entt/entt.hpp" "HaGame/Utils/StateManager.h" "HaGame/Core/Scene.h" "HaGame/Core/ECS/EntityManager.h" "HaGame/Input/InputManager.h" "HaGame/Graphics/PerspectiveCamera.hpp" "HaGame/Core/ECS/ECS.h" "HaGame/Core/ECS/SystemManager.h" "HaGame/Graphics/Image.h" "HaGame/Utils/Timer.h" "HaGame/Graphics/Plane.h" "HaGame/Math/Perlin.h" "HaGame/Utils/Random.h"   "HaGame/Graphics/Components/MeshRenderer.h" "HaGame/Graphics/Systems/RenderSystem.h" "HaGame/Physics/Components/SimpleMovement.h" "HaGame/Physics/Systems/PhysicsSystem.h" "HaGame/Physics/Systems/MovementSystem.h" "HaGame/Graphics/Components/FPSCameraController.h" "HaGame/Graphics/Systems/CameraSystem.h" "HaGame/Physics/Components/RotationMovement.h" "HaGame/Graphics/Components/CameraComponent.h" "HaGame/Graphics/Components/AxisRenderer.h" "HaGame/Graphics/Components/BoundingBoxRenderer.h" "HaGame/Graphics/Components/RigidBodyRenderer.h" "HaGame/Utils/SpatialMap.h"  "HaGame/Physics/Components/Collider.h" "HaGame/Math/Triangle.h" "HaGame/Math/Line.h" "HaGame/Math/Plane.h" "HaGame/Math/AABB.h" "HaGame/Math/NSphere.h" "HaGame/Math/LineSegment.h" "HaGame/Math/Ray.h" "HaGame/Math/OBB.h" "HaGame/Utils/Memory.h" "HaGame/Graphics/Light.h" "HaGame/Graphics/Components/LightComponent.h" "HaGame/Graphics/Systems/LightingSystem.h" "HaGame/Graphics/Cubemap.h" "HaGame/Graphics/Components/SkyboxRenderer.h" "HaGame/Utils/Testing.h" "HaGame/Graphics/Font.h" "HaGame/Graphics/VertexBuffer.h" "HaGame/Graphics/Text.h" "HaGame/Graphics/Components/TextRenderer.h" "HaGame/Graphics/Components/Text3dRenderer.h" "HaGame/Core/Object.h" "HaGame/Graphics/Components/SpriteRenderer.h" "HaGame/Graphics/OrthographicCamera.hpp" "HaGame/Physics/Components/SimpleMovement2d.h" "HaGame/Graphics/Components/PixelGridRenderer.h" "HaGame/Graphics/Pixel.h" "HaGame/Graphics/VertexBuffer.h"  "HaGame/Graphics/PixelGrid.h"  "HaGame/Utils/Grid.h" "HaGame/Graphics/VertexArray.h" "HaGame/Graphics/DataType.h" "HaGame/Utils/Algorithms/AStar.h" "HaGame/Utils/Algorithms/AStar.cpp" "HaGame/UI/UI.h" "HaGame/UI/FileTree.h"  "HaGame/Utils/Path.h" "HaGame/Graphics/GridLines.h"  "HaGame/Graphics/AnimatedSprite.h" "HaGame/Graphics/Components/AnimatedSpriteRenderer.h" "HaGame/UI/Editable.h" "HaGame/Core/Event.h" "HaGame/Core/Subscriber.h" "HaGame/Core/Publisher.h"    "HaGame/Graphics/ParticleEmitter.h" "HaGame/Audio/Sample.h" "HaGame/Audio/Audio.h" "HaGame/Graphics/Components/BoxRenderer.h" "HaGame/Vendor/soloud/include/soloud.h" "HaGame/Vendor/soloud/include/soloud_audiosource.h" "HaGame/Vendor/soloud/include/soloud_bassboostfilter.h" "HaGame/Vendor/soloud/include/soloud_biquadresonantfilter.h" "HaGame/Vendor/soloud/include/soloud_bus.h" "HaGame/Vendor/soloud/include/soloud_c.h" "HaGame/Vendor/soloud/include/soloud_dcremovalfilter.h" "HaGame/Vendor/soloud/include/soloud_echofilter.h" "HaGame/Vendor/soloud/include/soloud_error.h" "HaGame/Vendor/soloud/include/soloud_fader.h" "HaGame/Vendor/soloud/include/soloud_fft.h" "HaGame/Vendor/soloud/include/soloud_fftfilter.h" "HaGame/Vendor/soloud/include/soloud_file.h" "HaGame/Vendor/soloud/include/soloud_file_hack_off.h" "HaGame/Vendor/soloud/include/soloud_file_hack_on.h" "HaGame/Vendor/soloud/include/soloud_filter.h" "HaGame/Vendor/soloud/include/soloud_flangerfilter.h" "HaGame/Vendor/soloud/include/soloud_freeverbfilter.h" "HaGame/Vendor/soloud/include/soloud_internal.h" "HaGame/Vendor/soloud/include/soloud_lofifilter.h" "HaGame/Vendor/soloud/include/soloud_misc.h" "HaGame/Vendor/soloud/include/soloud_monotone.h" "HaGame/Vendor/soloud/include/soloud_noise.h" "HaGame/Vendor/soloud/include/soloud_openmpt.h" "HaGame/Vendor/soloud/include/soloud_queue.h" "HaGame/Vendor/soloud/include/soloud_robotizefilter.h" "HaGame/Vendor/soloud/include/soloud_sfxr.h" "HaGame/Vendor/soloud/include/soloud_speech.h" "HaGame/Vendor/soloud/include/soloud_tedsid.h" "HaGame/Vendor/soloud/include/soloud_thread.h" "HaGame/Vendor/soloud/include/soloud_vic.h" "HaGame/Vendor/soloud/include/soloud_vizsn.h" "HaGame/Vendor/soloud/include/soloud_wav.h" "HaGame/Vendor/soloud/include/soloud_waveshaperfilter.h" "HaGame/Vendor/soloud/include/soloud_wavstream.h" "HaGame/Vendor/soloud/src/audiosource/monotone/soloud_monotone.cpp" "HaGame/Vendor/soloud/src/audiosource/noise/soloud_noise.cpp" "HaGame/Vendor/soloud/src/audiosource/openmpt/soloud_openmpt.cpp" "HaGame/Vendor/soloud/src/audiosource/openmpt/soloud_openmpt_dll.c" "HaGame/Vendor/soloud/src/audiosource/sfxr/soloud_sfxr.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/darray.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/darray.h" "HaGame/Vendor/soloud/src/audiosource/speech/klatt.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/klatt.h" "HaGame/Vendor/soloud/src/audiosource/speech/resonator.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/resonator.h" "HaGame/Vendor/soloud/src/audiosource/speech/soloud_speech.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/tts.cpp" "HaGame/Vendor/soloud/src/audiosource/speech/tts.h" "HaGame/Vendor/soloud/src/audiosource/tedsid/sid.cpp" "HaGame/Vendor/soloud/src/audiosource/tedsid/sid.h" "HaGame/Vendor/soloud/src/audiosource/tedsid/soloud_tedsid.cpp" "HaGame/Vendor/soloud/src/audiosource/tedsid/ted.cpp" "HaGame/Vendor/soloud/src/audiosource/tedsid/ted.h" "HaGame/Vendor/soloud/src/audiosource/vic/soloud_vic.cpp" "HaGame/Vendor/soloud/src/audiosource/vizsn/soloud_vizsn.cpp" "HaGame/Vendor/soloud/src/audiosource/wav/dr_flac.h" "HaGame/Vendor/soloud/src/audiosource/wav/dr_impl.cpp" "HaGame/Vendor/soloud/src/audiosource/wav/dr_mp3.h" "HaGame/Vendor/soloud/src/audiosource/wav/dr_wav.h" "HaGame/Vendor/soloud/src/audiosource/wav/soloud_wav.cpp" "HaGame/Vendor/soloud/src/audiosource/wav/soloud_wavstream.cpp" "HaGame/Vendor/soloud/src/audiosource/wav/stb_vorbis.c" "HaGame/Vendor/soloud/src/audiosource/wav/stb_vorbis.h" "HaGame/Vendor/soloud/src/backend/alsa/soloud_alsa.cpp" "HaGame/Vendor/soloud/src/backend/coreaudio/soloud_coreaudio.cpp" "HaGame/Vendor/soloud/src/backend/jack/soloud_jack.cpp" "HaGame/Vendor/soloud/src/backend/miniaudio/miniaudio.h" "HaGame/Vendor/soloud/src/backend/miniaudio/soloud_miniaudio.cpp" "HaGame/Vendor/soloud/src/backend/nosound/soloud_nosound.cpp" "HaGame/Vendor/soloud/src/backend/null/soloud_null.cpp" "HaGame/Vendor/soloud/src/backend/openal/soloud_openal.cpp" "HaGame/Vendor/soloud/src/backend/openal/soloud_openal_dll.c" "HaGame/Vendor/soloud/src/backend/opensles/soloud_opensles.cpp" "HaGame/Vendor/soloud/src/backend/oss/soloud_oss.cpp" "HaGame/Vendor/soloud/src/backend/portaudio/soloud_portaudio.cpp" "HaGame/Vendor/soloud/src/backend/portaudio/soloud_portaudio_dll.c" "HaGame/Vendor/soloud/src/backend/sdl/soloud_sdl1.cpp" "HaGame/Vendor/soloud/src/backend/sdl/soloud_sdl1_dll.c" "HaGame/Vendor/soloud/src/backend/sdl/soloud_sdl2.cpp" "HaGame/Vendor/soloud/src/backend/sdl/soloud_sdl2_dll.c" "HaGame/Vendor/soloud/src/backend/sdl2_static/soloud_sdl2_static.cpp" "HaGame/Vendor/soloud/src/backend/sdl_static/soloud_sdl_static.cpp" "HaGame/Vendor/soloud/src/backend/vita_homebrew/soloud_vita_homebrew.cpp" "HaGame/Vendor/soloud/src/backend/wasapi/soloud_wasapi.cpp" "HaGame/Vendor/soloud/src/backend/winmm/soloud_winmm.cpp" "HaGame/Vendor/soloud/src/backend/xaudio2/soloud_xaudio2.cpp" "HaGame/Vendor/soloud/src/core/soloud.cpp" "HaGame/Vendor/soloud/src/core/soloud_audiosource.cpp" "HaGame/Vendor/soloud/src/core/soloud_bus.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_3d.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_basicops.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_faderops.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_filterops.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_getters.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_setters.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_voicegroup.cpp" "HaGame/Vendor/soloud/src/core/soloud_core_voiceops.cpp" "HaGame/Vendor/soloud/src/core/soloud_fader.cpp" "HaGame/Vendor/soloud/src/core/soloud_fft.cpp" "HaGame/Vendor/soloud/src/core/soloud_fft_lut.cpp" "HaGame/Vendor/soloud/src/core/soloud_file.cpp" "HaGame/Vendor/soloud/src/core/soloud_filter.cpp" "HaGame/Vendor/soloud/src/core/soloud_misc.cpp" "HaGame/Vendor/soloud/src/core/soloud_queue.cpp" "HaGame/Vendor/soloud/src/core/soloud_thread.cpp" "HaGame/Vendor/soloud/src/c_api/soloud_c.cpp" "HaGame/Vendor/soloud/src/filter/soloud_bassboostfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_biquadresonantfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_dcremovalfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_echofilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_fftfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_flangerfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_freeverbfilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_lofifilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_robotizefilter.cpp" "HaGame/Vendor/soloud/src/filter/soloud_waveshaperfilter.cpp" "HaGame/Vendor/soloud/src/tools/codegen/main.cpp" "HaGame/Vendor/soloud/src/tools/lutgen/main.cpp" "HaGame/Vendor/soloud/src/tools/resamplerlab/main.cpp" "HaGame/Vendor/soloud/src/tools/resamplerlab/stb_image_write.c" "HaGame/Vendor/soloud/src/tools/resamplerlab/stb_image_write.h" "HaGame/Vendor/soloud/src/tools/sanity/sanity.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/cbmtune.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/cbmtune.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/cpu.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/cpu.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/cpu7501asm.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/main.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/mem.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/psid.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/roms.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/sid.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/sid.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/tedmem.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/tedmem.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/tedplay.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/tedplay.h" "HaGame/Vendor/soloud/src/tools/tedsid2dump/tedsound.cpp" "HaGame/Vendor/soloud/src/tools/tedsid2dump/types.h" "HaGame/Vendor/soloud/soloud.cpp" "HaGame/Vendor/soloud/soloud_audiosource.cpp" "HaGame/Vendor/soloud/soloud_bus.cpp" "HaGame/Vendor/soloud/soloud_core_3d.cpp" "HaGame/Vendor/soloud/soloud_core_basicops.cpp" "HaGame/Vendor/soloud/soloud_core_faderops.cpp" "HaGame/Vendor/soloud/soloud_core_filterops.cpp" "HaGame/Vendor/soloud/soloud_core_getters.cpp" "HaGame/Vendor/soloud/soloud_core_setters.cpp" "HaGame/Vendor/soloud/soloud_core_voicegroup.cpp" "HaGame/Vendor/soloud/soloud_core_voiceops.cpp" "HaGame/Vendor/soloud/soloud_fader.cpp" "HaGame/Vendor/soloud/soloud_fft.cpp" "HaGame/Vendor/soloud/soloud_fft_lut.cpp" "HaGame/Vendor/soloud/soloud_file.cpp" "HaGame/Vendor/soloud/soloud_filter.cpp" "HaGame/Vendor/soloud/soloud_misc.cpp" "HaGame/Vendor/soloud/soloud_queue.cpp" "HaGame/Vendor/soloud/soloud_thread.cpp")

add_executable(HaGame HaGame/HaGame.cpp)

set(LIBS ${SDL2_LIBS} ${SDL2_MIXER_LIBRARIES} ${OPENGL_LIBRARIES} ${GLEW_LIBS} )
message(STATUS "LIBS: ${LIBS} ")

target_link_libraries(HaGame ${LIBS})

add_executable(HaGameEditor Editor/Editor.cpp "Editor/Editor.h" "Editor/Systems/CameraController.h" "Editor/Systems/Renderer.h" "Editor/Systems/MousePicker.h" "Editor/Systems/UI.h")
target_link_libraries(HaGameEditor ${LIBS})

add_executable(Demos Demos/Demo.cpp "Demos/Demo.cpp" "Demos/FPS/FPS.hpp" "Demos/Demo.h" "Demos/MiniJam/OneRoom.hpp" "Demos/MiniJam/ResourceSystem.h" "Demos/MiniJam/DrawingSystem.h" "Demos/MiniJam/MovementSystem.h" "Demos/MiniJam/ViewportSystem.h" "Demos/MiniJam/Pathfinding.hpp" "Demos/SpriteSheetHelper/SpriteSheetHelper.h")
target_link_libraries(Demos ${LIBS})

add_executable(Goom2 Goom2/Goom2.cpp "Goom2/Goom2.cpp" "Goom2/Goom2.h"   "Goom2/Systems/ResourceSystem.h" "Goom2/Scenes/MainMenu.h" "Goom2/Systems/PlayerSystem.h" "Goom2/Components/PlayerController.h" "Goom2/Scenes/MapBuilder.h" "Goom2/Components/PlayerRenderer.h" "Goom2/Components/Bullet.h"  "Goom2/Components/Weapon.h" "Goom2/Components/Inventory.h" "Goom2/Components/Projectile.h" "Goom2/Systems/WeaponSystem.h" "Goom2/Components/Target.h" "Goom2/Systems/EnemySystem.h" "Goom2/Components/Health.h" "Goom2/Components/Enemy.h" "Goom2/Components/Enemies/Turret.h" "Goom2/Components/Actor.h" "Goom2/Systems/ActorSystem.h")
target_link_libraries(Goom2 ${LIBS})

add_executable(ImSim ImSim/ImSim.cpp)
target_link_libraries(ImSim ${LIBS})

if (MSVC_VERSION GREATER_EQUAL "1900")
    include(CheckCXXCompilerFlag)
    CHECK_CXX_COMPILER_FLAG("/std:c++latest" _cpp_latest_flag_supported)
    if (_cpp_latest_flag_supported)
        target_compile_options(HaGame PRIVATE "/std:c++17")
        target_compile_options(HaGameEditor PRIVATE "/std:c++17")
        target_compile_options(Demos PRIVATE "/std:c++17")
        target_compile_options(Goom2 PRIVATE "/std:c++17")
        target_compile_options(ImSim PRIVATE "/std:c++17")
    endif()
endif() 

# Copy SDL2 DLLs to output folder on Windows
if(WIN32)
    foreach(DLL ${SDL2_DLLS})
        add_custom_command(TARGET HaGame POST_BUILD COMMAND
            ${CMAKE_COMMAND} -E copy_if_different ${DLL} $<TARGET_FILE_DIR:HaGame>)
    endforeach()
endif()